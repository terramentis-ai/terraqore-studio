// ============================================================================
// FILE: src/components/settings/PSMPSection.jsx
// ============================================================================
import React from 'react';
import { Zap } from 'lucide-react';
import { useSettingsStore } from '../../store/settingsStore';

const PSMPSection = () => {
  const {
    autoBlockOnConflicts,
    conflictResolutionSuggestions,
    artifactDeclarationMode,
    conflictSeverityThreshold,
    updatePSMPSettings,
  } = useSettingsStore();

  const toggleSetting = (key) => {
    updatePSMPSettings({ [key]: !useSettingsStore.getState()[key] });
  };

  return (
    <div className="border border-white/10 bg-white/5 rounded p-4">
      <div className="text-sm font-medium mb-4 flex items-center gap-2">
        <Zap className="w-4 h-4" />
        PSMP (Project State Management)
      </div>
      <div className="space-y-3">
        <label className="flex items-center justify-between p-2 hover:bg-white/5 rounded cursor-pointer">
          <div>
            <div className="text-sm">Auto-Block on Conflicts</div>
            <div className="text-xs text-white/60">Automatically block projects with dependency conflicts</div>
          </div>
          <input
            type="checkbox"
            checked={autoBlockOnConflicts}
            onChange={() => toggleSetting('autoBlockOnConflicts')}
            className="w-4 h-4"
          />
        </label>

        <label className="flex items-center justify-between p-2 hover:bg-white/5 rounded cursor-pointer">
          <div>
            <div className="text-sm">Conflict Resolution Suggestions</div>
            <div className="text-xs text-white/60">Provide AI-powered resolution recommendations</div>
          </div>
          <input
            type="checkbox"
            checked={conflictResolutionSuggestions}
            onChange={() => toggleSetting('conflictResolutionSuggestions')}
            className="w-4 h-4"
          />
        </label>

        <div>
          <label className="text-xs text-white/60 block mb-2">ARTIFACT DECLARATION MODE</label>
          <select
            value={artifactDeclarationMode}
            onChange={(e) => updatePSMPSettings({ artifactDeclarationMode: e.target.value })}
            className="w-full bg-black border border-white/20 rounded p-2 text-sm"
          >
            <option value="mandatory">Mandatory (Strict) - Enforce all declarations</option>
            <option value="optional">Optional (Permissive) - Allow missing declarations</option>
          </select>
        </div>

        <div>
          <label className="text-xs text-white/60 block mb-2">CONFLICT SEVERITY THRESHOLD</label>
          <select
            value={conflictSeverityThreshold}
            onChange={(e) => updatePSMPSettings({ conflictSeverityThreshold: e.target.value })}
            className="w-full bg-black border border-white/20 rounded p-2 text-sm"
          >
            <option value="critical">Critical Only</option>
            <option value="high">High & Critical</option>
            <option value="medium">Medium & Above</option>
            <option value="all">All Levels</option>
          </select>
        </div>
      </div>
    </div>
  );
};

export default PSMPSection;

// ============================================================================
// FILE: src/components/settings/BuildDataSection.jsx
// ============================================================================
import React from 'react';
import { Activity } from 'lucide-react';
import { useSettingsStore } from '../../store/settingsStore';

const BuildDataSection = () => {
  const {
    stageExecutionTracking,
    metricsCollection,
    testSnapshotSaving,
    errorDiagnostics,
    updateBuildDataSettings,
  } = useSettingsStore();

  const toggleSetting = (key) => {
    updateBuildDataSettings({ [key]: !useSettingsStore.getState()[key] });
  };

  return (
    <div className="border border-white/10 bg-white/5 rounded p-4">
      <div className="text-sm font-medium mb-4 flex items-center gap-2">
        <Activity className="w-4 h-4" />
        BUILD DATA COLLECTION
      </div>
      <div className="space-y-3">
        <label className="flex items-center justify-between p-2 hover:bg-white/5 rounded cursor-pointer">
          <div>
            <div className="text-sm">Stage Execution Tracking</div>
            <div className="text-xs text-white/60">Track all workflow stage executions</div>
          </div>
          <input
            type="checkbox"
            checked={stageExecutionTracking}
            onChange={() => toggleSetting('stageExecutionTracking')}
            className="w-4 h-4"
          />
        </label>

        <label className="flex items-center justify-between p-2 hover:bg-white/5 rounded cursor-pointer">
          <div>
            <div className="text-sm">Metrics Collection</div>
            <div className="text-xs text-white/60">Collect performance and quality metrics</div>
          </div>
          <input
            type="checkbox"
            checked={metricsCollection}
            onChange={() => toggleSetting('metricsCollection')}
            className="w-4 h-4"
          />
        </label>

        <label className="flex items-center justify-between p-2 hover:bg-white/5 rounded cursor-pointer">
          <div>
            <div className="text-sm">Test Snapshot Saving</div>
            <div className="text-xs text-white/60">Save test data snapshots for debugging</div>
          </div>
          <input
            type="checkbox"
            checked={testSnapshotSaving}
            onChange={() => toggleSetting('testSnapshotSaving')}
            className="w-4 h-4"
          />
        </label>

        <label className="flex items-center justify-between p-2 hover:bg-white/5 rounded cursor-pointer">
          <div>
            <div className="text-sm">Error Diagnostics</div>
            <div className="text-xs text-white/60">Log detailed error context for analysis</div>
          </div>
          <input
            type="checkbox"
            checked={errorDiagnostics}
            onChange={() => toggleSetting('errorDiagnostics')}
            className="w-4 h-4"
          />
        </label>
      </div>
    </div>
  );
};

export default BuildDataSection;

// ============================================================================
// FILE: src/components/settings/CollaborationSection.jsx
// ============================================================================
import React from 'react';
import { GitBranch } from 'lucide-react';
import { useSettingsStore } from '../../store/settingsStore';

const CollaborationSection = () => {
  const {
    minQualityThreshold,
    maxIterationsPerAgent,
    feedbackSeverityFilter,
    autoIterateOnFailure,
    updateCollaborationSettings,
  } = useSettingsStore();

  return (
    <div className="border border-white/10 bg-white/5 rounded p-4">
      <div className="text-sm font-medium mb-4 flex items-center gap-2">
        <GitBranch className="w-4 h-4" />
        AGENT COLLABORATION
      </div>
      <div className="space-y-3">
        <div>
          <label className="text-xs text-white/60 block mb-2">MIN QUALITY THRESHOLD</label>
          <input
            type="range"
            min="0"
            max="10"
            step="0.5"
            value={minQualityThreshold}
            onChange={(e) => updateCollaborationSettings({ minQualityThreshold: parseFloat(e.target.value) })}
            className="w-full"
          />
          <div className="text-xs text-white/60 text-right">{minQualityThreshold.toFixed(1)}/10</div>
        </div>

        <div>
          <label className="text-xs text-white/60 block mb-2">MAX ITERATIONS PER AGENT</label>
          <input
            type="number"
            value={maxIterationsPerAgent}
            onChange={(e) => updateCollaborationSettings({ maxIterationsPerAgent: parseInt(e.target.value) })}
            className="w-full bg-black border border-white/20 rounded p-2 text-sm"
          />
        </div>

        <div>
          <label className="text-xs text-white/60 block mb-2">FEEDBACK SEVERITY FILTER</label>
          <select
            value={feedbackSeverityFilter}
            onChange={(e) => updateCollaborationSettings({ feedbackSeverityFilter: e.target.value })}
            className="w-full bg-black border border-white/20 rounded p-2 text-sm"
          >
            <option value="all">All Feedback</option>
            <option value="warning">Warnings & Errors</option>
            <option value="error">Errors Only</option>
            <option value="critical">Critical Only</option>
          </select>
        </div>

        <label className="flex items-center justify-between p-2 hover:bg-white/5 rounded cursor-pointer">
          <div>
            <div className="text-sm">Auto-Iterate on Validation Failures</div>
            <div className="text-xs text-white/60">Automatically retry when validation fails</div>
          </div>
          <input
            type="checkbox"
            checked={autoIterateOnFailure}
            onChange={(e) => updateCollaborationSettings({ autoIterateOnFailure: e.target.checked })}
            className="w-4 h-4"
          />
        </label>
      </div>
    </div>
  );
};

export default CollaborationSection;

// ============================================================================
// FILE: src/components/settings/RAGSection.jsx
// ============================================================================
import React from 'react';
import { Code } from 'lucide-react';
import { useSettingsStore } from '../../store/settingsStore';

const RAGSection = () => {
  const {
    ragEnabled,
    retrievalTopK,
    vectorStore,
    updateRAGSettings,
  } = useSettingsStore();

  return (
    <div className="border border-white/10 bg-white/5 rounded p-4">
      <div className="text-sm font-medium mb-4 flex items-center gap-2">
        <Code className="w-4 h-4" />
        RAG & RETRIEVAL
      </div>
      <div className="space-y-3">
        <label className="flex items-center justify-between p-2 hover:bg-white/5 rounded cursor-pointer">
          <div>
            <div className="text-sm">Enable RAG for Agents</div>
            <div className="text-xs text-white/60">Use retrieval-augmented generation for context</div>
          </div>
          <input
            type="checkbox"
            checked={ragEnabled}
            onChange={(e) => updateRAGSettings({ ragEnabled: e.target.checked })}
            className="w-4 h-4"
          />
        </label>

        <div>
          <label className="text-xs text-white/60 block mb-2">RETRIEVAL TOP-K</label>
          <input
            type="number"
            value={retrievalTopK}
            onChange={(e) => updateRAGSettings({ retrievalTopK: parseInt(e.target.value) })}
            className="w-full bg-black border border-white/20 rounded p-2 text-sm"
          />
        </div>

        <div>
          <label className="text-xs text-white/60 block mb-2">VECTOR STORE</label>
          <select
            value={vectorStore}
            onChange={(e) => updateRAGSettings({ vectorStore: e.target.value })}
            className="w-full bg-black border border-white/20 rounded p-2 text-sm"
          >
            <option value="chromadb">ChromaDB (Local)</option>
            <option value="faiss">FAISS (Local)</option>
            <option value="pinecone">Pinecone (Cloud)</option>
          </select>
        </div>
      </div>
    </div>
  );
};

export default RAGSection;

// ============================================================================
// FILE: src/components/settings/WebSocketSection.jsx
// ============================================================================
import React from 'react';
import { Radio } from 'lucide-react';
import { useSettingsStore } from '../../store/settingsStore';

const WebSocketSection = () => {
  const {
    wsEnabled,
    wsEndpoint,
    updateFrequency,
    desktopNotifications,
    updateWebSocketSettings,
  } = useSettingsStore();

  return (
    <div className="border border-white/10 bg-white/5 rounded p-4">
      <div className="text-sm font-medium mb-4 flex items-center gap-2">
        <Radio className="w-4 h-4" />
        REAL-TIME UPDATES
      </div>
      <div className="space-y-3">
        <label className="flex items-center justify-between p-2 hover:bg-white/5 rounded cursor-pointer">
          <div>
            <div className="text-sm">WebSocket Connection</div>
            <div className="text-xs text-white/60">Enable live agent execution updates</div>
          </div>
          <input
            type="checkbox"
            checked={wsEnabled}
            onChange={(e) => updateWebSocketSettings({ wsEnabled: e.target.checked })}
            className="w-4 h-4"
          />
        </label>

        <div>
          <label className="text-xs text-white/60 block mb-2">WEBSOCKET ENDPOINT</label>
          <input
            type="text"
            value={wsEndpoint}
            onChange={(e) => updateWebSocketSettings({ wsEndpoint: e.target.value })}
            className="w-full bg-black border border-white/20 rounded p-2 text-sm"
          />
        </div>

        <div>
          <label className="text-xs text-white/60 block mb-2">UPDATE FREQUENCY</label>
          <select
            value={updateFrequency}
            onChange={(e) => updateWebSocketSettings({ updateFrequency: e.target.value })}
            className="w-full bg-black border border-white/20 rounded p-2 text-sm"
          >
            <option value="realtime">Real-time (Immediate)</option>
            <option value="5s">Every 5 seconds</option>
            <option value="10s">Every 10 seconds</option>
            <option value="30s">Every 30 seconds</option>
          </select>
        </div>

        <label className="flex items-center justify-between p-2 hover:bg-white/5 rounded cursor-pointer">
          <div>
            <div className="text-sm">Desktop Notifications</div>
            <div className="text-xs text-white/60">Show browser notifications for key events</div>
          </div>
          <input
            type="checkbox"
            checked={desktopNotifications}
            onChange={(e) => updateWebSocketSettings({ desktopNotifications: e.target.checked })}
            className="w-4 h-4"
          />
        </label>
      </div>
    </div>
  );
};

export default WebSocketSection;